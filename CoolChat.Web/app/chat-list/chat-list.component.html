<div class="chat-list" [class.dark]="isDark" [class.fullWidth]="!minModeHiddenChatList" [class.zeroMarginLeft]="!minModeHiddenChatList">
    <div class="search-dialog" *ngIf="!minMode || showSearch" [class.dark]="isDark">
        <label for="search-dialog-input">
            <i class="fa fa-search" aria-hidden="true"></i>
        </label>
        <input id="search-dialog-input" type="text" #searchInput (keyup)="onDialogSearch(searchInput.value)" [class.dark]="isDark" placeholder="Search..." />
        <span class="search-new-contacts ion-person-add" (click)="onSearchContacts()" [class.dark]="isDark"></span>
    </div>

    <div class="dialog-list-wrapper" [class.stick-to-top]="minMode && !showSearch">
        <div class="add-contact" *ngIf="userAccount && userAccount.dialogs.length == 0 && !globalSearchEnabled" (click)="onSearchContacts()">
            <div class="add-contact-wrapper">
                <span class="add-contact-icon ion-plus" [class.dark]="isDark"></span>
            </div>
        </div>
        <ul *ngIf="userAccount && user && userAccount.dialogs.length > 0 && !globalSearchEnabled" class="dialog-list">
            <li *ngFor="let dialog of filteredDialogs" [class.dark]="isDark" (click)="selectDialog(dialog)" class="room-list" [class.selected]="this.selectedDialog==dialog && !minMode">
                <div class="dialog">
                    <div class="avatar">
                        <div class="avatar-area">
                            <div class="avatar-image">
                                <img [src]="dialog.members[0].avatarUrl" />
                            </div>
                            <div class="online-mark" *ngIf="userIsOnline(dialog.members[0])" [class.dark]="isDark">
                                <div class="online-circle">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="message">
                        <div class="message-header" [class.dark]="isDark">
                            <span class="name" [class.dark]="isDark">{{dialog.members[0].name}}</span>
                            <span class="time" [class.dark]="isDark" *ngIf="dialog.lastMessage">{{dialog.lastMessage.postedTime | relativeDate}}</span>
                        </div>
                        <div class="message-body" *ngIf="dialog.lastMessage">
                            <span class="message-text" *ngIf="!dialog.isTyping" [class.unreaded]="!dialog.lastMessage.isReaded" [class.full-length]="dialog.newMessagesNumber < 1" [class.dark]="isDark"><span class="sender" *ngIf="dialog.lastMessage.userId==user.id">You: </span>{{dialog.lastMessage.body}}</span>
                            <span class="message-text" *ngIf="dialog.isTyping" [class.unreaded]="!dialog.lastMessage.isReaded" [class.dark]="isDark">user is typing...</span>
                            <span class="message-notification" [class.dark]="isDark" *ngIf="dialog.newMessagesNumber > 0">{{dialog.newMessagesNumber}}</span>
                        </div>
                        <div class="message-no-messages" *ngIf="!dialog.lastMessage">No messages yet</div>
                    </div>
                </div>
            </li>
        </ul>
        <div class="global-search" *ngIf="globalSearchEnabled && contactsListFiltered">
            <div class="global-search-title" [class.dark]="isDark">
                Global search<span class="ion-android-close" (click)="globalSearchEnabled = false"></span>
            </div>
            <div class="global-search-no-results" *ngIf="contactsListFiltered.length == 0">No results found</div>
            <ul class="global-search-list">
                <li *ngFor="let contact of contactsListFiltered" [class.dark]="isDark">
                    <div class="contact">
                        <div class="contact-avatar">
                            <img [src]="contact.avatarUrl" />
                        </div>
                        <div class="contact-options">
                            <div class="contact-name">
                                {{contact.name}}
                            </div>
                            <div class="contact-add-button" *ngIf="!contact.isAdded" (click)="onAddcontact(contact)" [class.dark]="isDark">
                                <i class="fa fa-plus" aria-hidden="true"></i>&nbsp;Add
                            </div>
                            <div class="contact-added-mark" *ngIf="contact.isAdded" [class.dark]="isDark">
                                <i class="ion-checkmark" aria-hidden="true"></i>&nbsp;Added
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>



<div messages class="chat-area"
     *ngIf="selectedDialog"
     [minModeHiddenChatList]="minModeHiddenChatList"
     [isDark]="isDark"
     [briefDialog]="selectedDialog"
     [user]="user"
     [class.fullWidth]="hiddenChatList"
     [class.oneHunMarginLeft]="!minModeHiddenChatList">
</div>
<div [class.dark]="isDark" class="chat-area-intro" *ngIf="!selectedDialog">
    <div class="chat-intro-message">Please, select chat</div>
</div>
